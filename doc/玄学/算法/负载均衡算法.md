

## 负载均衡分发策略
https://blog.csdn.net/ds986619036/article/details/80538669
一般来说负载均衡设备都会默认支持多种负载均衡分发策略，例如：

#### 轮询（RoundRobin）
将请求顺序循环地发到每个服务器。当其中某个服务器发生故障，AX就把其从顺序循环队列中拿出，不参加下一次的轮询，直到其恢复正常。

优点：实现简单、高效;易水平扩展。
缺点：请求到目的结点的不确定，造成其无法适用于有写的场景(缓存，数据库写)。
应用场景：数据库或应用服务层中只有读的场景。

#### 随机
优点：实现简单、易水平扩展。
缺点：同 Round Robin，无法用于有写的场景。
应用场景：数据库负载均衡，也是只有读的场景。


#### 比率（Ratio）：
给每个服务器分配一个加权值为比例，根椐这个比例，把用户的请求分配到每个服务器。当其中某个服务器发生故障，AX就把其从服务器队列中拿出，不参加下一次的用户请求的分配，直到其恢复正常。

#### 优先权（Priority）：
给所有服务器分组，给每个组定义优先权，将用户的请求分配给优先级最高的服务器组（在同一组内，采用预先设定的轮询或比率算法，分配用户的请求）；当最高优先级中所有服务器或者指定数量的服务器出现故障，AX将把请求送给次优先级的服务器组。这种方式，实际为用户提供一种热备份的方式。

#### 最少连接数（LeastConnection）：
AX会记录当前每台服务器或者服务端口上的连接数，新的连接将传递给连接数最少的服务器。当其中某个服务器发生故障，AX就把其从服务器队列中拿出，不参加下一次的用户请求的分配，直到其恢复正常。

#### 最快响应时间（Fast Reponse time）：
新的连接传递给那些响应最快的服务器。当其中某个服务器发生故障，AX就把其从服务器队列中拿出，不参加下一次的用户请求的分配，直到其恢复正常。

#### 哈希算法( hash): 
将客户端的源地址，端口进行哈希运算，根据运算的结果转发给一台服务器进行处理，当其中某个服务器发生故障，就把其从服务器队列中拿出，不参加下一次的用户请求的分配，直到其恢复正常。

优点：相同 key 一定落在同一个结点上，这样就可用于有写有读的缓存场景。
缺点：在某个结点故障后，会导致哈希键重新分布，造成***率大幅度下降。
解决：一致性哈希 or 使用 keepalived 保证任何一个结点的高可用性，故障后会有其他结点顶上来。
应用场景：缓存，有读有写。


#### 基于数据包的内容分发：
例如判断HTTP的URL，如果URL中带有.jpg的扩展名，就把数据包转发到指定的服务器。



## 健康检查

## 会话保持